<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Command Processors </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Command Processors ">
    <meta name="generator" content="docfx 2.59.4.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="command-processors">Command Processors</h1>

<p>Command processors are the bread and butter of the commands package.  These parallel the functionality of controllers in web API development.  Your command processors should inherit from the <a href="/api/GravyBot.Commands.CommandProcessor.html">CommandProcessor</a> base class.  You can then add methods with a <a href="/api/GravyBot.Commands.CommandAttribute.html">CommandAttribute</a> to handle invocations.  Your methods should return <code>IClientMessage</code> or <code>Task&lt;IClientMessage&gt;</code> if you have a single response, or you can use <code>IEnumerable&lt;IClientMessage&gt;</code> or <code>IAsyncEnumerable&lt;IClientMessage&gt;</code> if you want to send multiple responses.</p>
<h2 id="basic-usage">Basic Usage</h2>
<p>You can have multiple methods in a single command processor.</p>
<pre><code class="lang-csharp">public class HelloCommandProcessor : CommandProcessor
{
    [Command(&quot;hello&quot;, Description = &quot;Say hello to your GravyBot.&quot;)]
    public IClientMessage SayHello() =&gt; new PrivateMessage(IncomingMessage.From, $&quot;Hello, {IncomingMessage.From}!&quot;);

    [Command(&quot;goodbye&quot;, Description = &quot;Say goodbye to your GravyBot.&quot;)]
    public IClientMessage SayGoodBye() =&gt; new PrivateMessage(IncomingMessage.From, $&quot;Goodbye, {IncomingMessage.From}!&quot;);
}
</code></pre>
<h2 id="message-context">Message Context</h2>
<p>See available properties of the <a href="/api/GravyBot.Commands.CommandProcessor.html">CommandProcessor</a> base class in the API documentation.</p>
<p>Commands are invoked when a <a href="http://gravyirc.halomademeapc.com/api/GravyIrc.Messages.PrivateMessage.html">PrivateMessage</a> matches the command prefix and definition.  You have access to the <a href="http://gravyirc.halomademeapc.com/api/GravyIrc.Messages.PrivateMessage.html">PrivateMessage</a> that triggered the command on the <a href="/api/GravyBot.Commands.CommandProcessor.html#GravyBot_Commands_CommandProcessor_IncomingMessage">IncomingMessage</a> property.  This is useful for obtaining information about the user that sent the message or what channel the message was in.  If your command method is bound to multiple trigger strings, you can access the <a href="/api/GravyBot.Commands.CommandProcessor.html#GravyBot_Commands_CommandProcessor_TriggeringCommandName">TriggeringCommandName</a> property to see which was used to invoke that method.</p>
<h2 id="dependency-injection">Dependency Injection</h2>
<p>Command processors get registered into the dependency injection container in a scoped context and have normal access to other services in a transient, scoped, or singleton lifecycle.</p>
<pre><code class="lang-csharp">public class ComplimentCommandProcessor : CommandProcessor
{
    private readonly ComplimentService service;

    public ComplimentCommandProcessor(ComplimentService service)
    {
        this.service = service;
    }

    [Command(&quot;compliment&quot;, Description = &quot;Have your GravyBot compliment you.&quot;)]
    public async Task&lt;IClientMessage&gt; Compliment()
    {
        var compliment = await service.GetComplimentAsync();
        return new PrivateMessage(IncomingMessage.From, $&quot;{IncomingMessage.From}: {compliment}&quot;);
    }
}
</code></pre>
<h2 id="multiple-bindings">Multiple Bindings</h2>
<p>You can bind one method to multiple command names.</p>
<pre><code class="lang-csharp">public class PotatoCommandProcessor : CommandProcessor
{
    [Command(&quot;spud&quot;)]
    [Command(&quot;tater&quot;)]
    public IClientMessage GetPotato() =&gt; new PrivateMessage(IncomingMessage.From, &quot;potato&quot;);
}
</code></pre>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/halomademeapc/GravyBot/blob/c13595a1f0c9e2012eab8c5b090278483596b561/docfx_project/articles/commands_command-processors.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
